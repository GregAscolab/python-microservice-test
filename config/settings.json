{
    "manager": {
        "discovery_interval": 10
    },
    "ui_service": {
        "host": "0.0.0.0",
        "port": 8000
    },
    "can_bus_service": {
        "interface": "pcan",
        "channel": "",
        "bitrate": 500000,
        "log_file_format": ".blf",
        "log_dir": "can_logs",
        "log_file_size": 10000000,
        "dbc_file": "config/db-full.dbc"
    },
    "dummy_service": {
        "update_interval": 5
    },
    "gps_service": {
        "update_interval": 5
    },
    "digital_twin_service": {
        "update_interval": 1,
        "dbc_file": "config/db-full.dbc",
        "excavator": {
            "turret": {
                "dimensions": {
                    "length": 10,
                    "width": 10,
                    "height": 2,
                    "offset": {
                        "x": 0,
                        "y": 0,
                        "z": 0
                    }
                },
                "angles_offset": {
                    "roll": 0,
                    "pitch": 0,
                    "yaw": 0
                },
                "axis_mapping": {
                    "roll": "Y",
                    "pitch": "X",
                    "yaw": "Z"
                },
                "axis_reverse": {
                    "roll": 1,
                    "pitch": 1,
                    "yaw": 0
                }
            },
            "boom": {
                "dimensions": {
                    "length": 4,
                    "width": 1,
                    "height": 2,
                    "offset": {
                        "x": 0,
                        "y": 0,
                        "z": 0
                    }
                },
                "angles_offset": {
                    "roll": 0,
                    "pitch": 0,
                    "yaw": 0
                },
                "axis_mapping": {
                    "roll": "Y",
                    "pitch": "X",
                    "yaw": "Z"
                },
                "axis_reverse": {
                    "roll": 1,
                    "pitch": 1,
                    "yaw": 0
                }
            },
            "jib": {
                "dimensions": {
                    "length": 4,
                    "width": 1,
                    "height": 1,
                    "offset": {
                        "x": 0,
                        "y": 0,
                        "z": 0
                    }
                },
                "angles_offset": {
                    "roll": 0,
                    "pitch": 0,
                    "yaw": 0
                },
                "axis_mapping": {
                    "roll": "Y",
                    "pitch": "X",
                    "yaw": "Z"
                },
                "axis_reverse": {
                    "roll": 1,
                    "pitch": 1,
                    "yaw": 0
                }
            },
            "bucket": {
                "dimensions": {
                    "length": 1,
                    "width": 1,
                    "height": 1,
                    "offset": {
                        "x": 0,
                        "y": 0,
                        "z": 0
                    }
                },
                "angles_offset": {
                    "roll": 0,
                    "pitch": 0,
                    "yaw": 0
                },
                "axis_mapping": {
                    "roll": "Y",
                    "pitch": "X",
                    "yaw": "Z"
                },
                "axis_reverse": {
                    "roll": 1,
                    "pitch": 1,
                    "yaw": 0
                }
            },
            "boom_cylinder": {
                "dimensions": {
                    "length": 2,
                    "external_diameter": 0.2,
                    "rod_diameter": 0.1
                }
            },
            "jib_cylinder": {
                "dimensions": {
                    "length": 1.5,
                    "external_diameter": 0.18,
                    "rod_diameter": 0.09
                }
            },
            "bucket_cylinder": {
                "dimensions": {
                    "length": 1,
                    "external_diameter": 0.15,
                    "rod_diameter": 0.07
                }
            }
        },
        "signal_mapping": {
            "turret_angle_y": "PF_CHASSIS_PFAngY",
            "turret_angle_x": "PF_CHASSIS_PFAngX",
            "turret_angle_z": "PF_CHASSIS_PFAngZ",
            "boom_angle_x": "PF_BOOM_PFAngX",
            "boom_angle_y": "PF_BOOM_PFAngY",
            "boom_angle_z": "PF_BOOM_PFAngZ",
            "boom_angle_gf": "PF_BOOM_PFAngGF",
            "boom_angle_quatX": "PF_BOOM_QuatX",
            "boom_angle_quatY": "PF_BOOM_QuatY",
            "boom_angle_quatZ": "PF_BOOM_QuatZ",
            "boom_angle_quatW": "PF_BOOM_QuatW",
            "jib_angle_y": "PF_BAL_PFAngY",
            "jib_angle_x": "PF_BAL_PFAngX",
            "jib_angle_z": "PF_BAL_PFAngZ",
            "bucket_angle_y": "PF_BUCKET_PFAngY",
            "bucket_angle_x": "PF_BUCKET_PFAngX",
            "bucket_angle_z": "PF_BUCKET_PFAngZ",
            "boom_hp": "A1_BOOM_HP_b",
            "boom_bp": "A2_BOOM_BP_b",
            "jib_hp": "A3_STICK_HP_b",
            "jib_bp": "A4_STICK_BP_b",
            "bucket_hp": "A5_TOOTH_HP_b",
            "bucket_bp": "A6_TOOTH_BP_b"
        }
    },
    "compute_service": {
        "ui_publish_interval": 1.0,
        "computations": [
            {
                "source_signal": "can_data.PF_CHASSIS_PFAngY",
                "computation_type": "RunningAverage",
                "output_name": "ChassisYAvg"
            },
            {
                "source_signal": "can_data.PF_BUCKET_PFAngX",
                "computation_type": "Differentiator",
                "output_name": "BXAvg"
            }
        ],
        "triggers": [
            {
                "name": "ChassisYHorizontal",
                "conditions": [
                    {
                        "name": "can_data.PF_CHASSIS_PFAngY",
                        "operator": "<=",
                        "value": 5
                    }
                ],
                "action": {
                    "on_become_active": {
                        "type": "publish",
                        "subject": "compute.alert.ChassisYHorizontal.active"
                    },
                    "on_become_inactive": {
                        "type": "publish",
                        "subject": "compute.alert.ChassisYHorizontal.inactive"
                    }
                },
                "is_currently_active": false,
                "last_event_timestamp": null
            },
            {
                "name": "BALTrigger",
                "conditions": [
                    {
                        "name": "can_data.PF_BAL_PFAngX",
                        "operator": ">=",
                        "value": 10
                    }
                ],
                "action": {
                    "on_become_active": {
                        "type": "publish",
                        "subject": "compute.alert.BALTrigger.active"
                    },
                    "on_become_inactive": {
                        "type": "publish",
                        "subject": "compute.alert.BALTrigger.inactive"
                    }
                },
                "is_currently_active": false,
                "last_event_timestamp": null
            },
            {
                "name": "trigtest",
                "conditions": [
                    {
                        "name": "can_data.PF_BOOM_AccY",
                        "operator": "<",
                        "value": 0.5
                    }
                ],
                "action": {
                    "on_become_active": {
                        "type": "publish",
                        "subject": "compute.alert.trigtest.active"
                    },
                    "on_become_inactive": {
                        "type": "publish",
                        "subject": "compute.alert.trigtest.inactive"
                    }
                },
                "is_currently_active": false,
                "last_event_timestamp": null
            }
        ]
    },
    "global": {
        "nats_url": "nats://127.0.0.1:4222",
        "hardware_platform": "generic",
        "s3_endpoint_url": "http://dev.ascolab.fr:10000",
        "s3_bucket": "eiffage-test",
        "s3_access_key": "MoqWL43ayrgZgKgCuLqT",
        "s3_secret_key": "lVfCiJLQ3dq1zd50mtufd0oQVo9B94O7gvWkLfGw"
    }
}